# Roles

Project Manager: Henry Post

Developer: 

Junior Developer: 

IT Operation: 

UI/UX: 

# 1. Languages and frameworks


## a. Programming languages and frameworks

### Java and Kotlin
  
Java and Kotlin are used for web server logic, for modeling business objects,
and for data presentation.

Kotlin is used because of its ability to compile into `.class` files, making it
fully interoperable with Java `.class` files. It adds syntactic sugar,
shortcuts, and useful functional programming operators (`map`, `reduce`, `fold`) to
lots of objects.

### Java Server Faces 2.1

Java Server Faces (JSF) for presenting our web application logic. JSF was chosen
over Java Server Pages (JSP) because of its security benefits and ability to
create complex HTML elements easily.

### Apache Tomcat

Apache Tomcat is used because of its maturity and versatility. Version 9 is what
we use in dev, but we have deployed successfully on 8.5 and 8.0. 8.0 is used in
our virtual machines.

### Spring Boot

Spring Boot is used as an 'inversion of control' framework to simplify
configuration.

Spring boot allows us to take disparate configuration files that would otherwise
be scattered throughout the project amongst `.prop`, `.cfg`, and `.xml` files
and collect them into one file called `applicationContext.xml`.

### Hibernate

Hibernate is used as an ORM engine to simplify CRUD operations. Hibernate sits
in-between the database and our web application to essentially marshall
annotated Java Objects into a database table, and create/read/update/delete them
in a sql-dialect-agnostic way.

We use JDBC as the connection driver for Hibernate. This means we can use
MariaDB, PostgreSQL, or MySQL.

# 2. Operating System Platform of Choice:

## a. OS choice and reason

The OS is Ubuntu Server 16.04 for all VMs.

Filename:

    ubuntu-16.04.6-server-amd64.iso

Download:

http://releases.ubuntu.com/16.04/ubuntu-16.04.6-server-amd64.iso

Checksums:

    openssl_md5          = ac8a79a86a905ebdc3ef3f5dd16b7360
    openssl_sha1         = 056b7c15efc15bbbf40bf1a9ff1a3531fcbf70a2
    openssl_sha256       = 16afb1375372c57471ea5e29803a89a5a6bd1f6aabea2e5e34ac1ab7eb9786ac
    openssl_sha512       = ecbf736f54adf81d930583d5c99733e0f24eb78781755da37152b68fe55fa2bcdaf9933e1d7848fdb133ed910dc1e1e3dc17bb55ce0bfd251c68cf0837ce441a

We chose Ubuntu because of its maturity, ease of use, and heavy documentation.

Downsides are mainly a large ISO and resource-heavy VM because Ubuntu Server
comes with lots of packages pre-installed and pre-configured.


## b. Packages installed

Note: You can use the following commands to reproduce the below information:

    grep -rni "apt" packer/scripts/*
    grep -rni "apt" vagrant-config/*

### b1. General-purpose tools

    git \
    tmux \
    curl \
    gtop \
    lynx

For developer usage to ping, view, download, or monitor various points of
information.

Git is included in this list.

### b2. Automatic installation

    software-properties-common \
    debconf-utils

For auto-installation of packages that prompt users for input.

### b3. Languages/Frameworks

    default-jdk \
    maven \
    python3.6 \
    tomcat8 \
    mysql-client \
    mysql-server-5.7

#### i. .deb packages

No .deb packages are used.

## c. Language/Framework packages

We have one place where Java packages are required, and that's in
`/server/pom.xml`.

We use Java Server Faces, JSP API for Servlet Filters for authentication, ffmpeg
for media transcoding, Hibernate for ORM, and MySQL connectors, to name a few.

Here is a list of packages generated by "[Pom
Explorer](https://github.com/ltearno/pom-explorer)":

    black.ninia:jep:3.8.2
    ch.qos.logback:logback-classic:1.0.13
    com.example:jep-example:1.0-SNAPSHOT
    com.jolira:onejar-maven-plugin:1.4.4
    com.sun.el:el-ri:1.0
    commons-dbcp:commons-dbcp:1.4
    commons-io:commons-io:2.6
    edu.cmu.sphinx:sphinx4-core:5prealpha-SNAPSHOT
    edu.cmu.sphinx:sphinx4-data:5prealpha-SNAPSHOT
    javax.inject:javax.inject:1
    javax.servlet.jsp:javax.servlet.jsp-api:2.3.3
    javax.servlet:javax.servlet-api:4.0.1
    javax.xml.bind:jaxb-api:2.2
    mysql:mysql-connector-java:8.0.12
    net.bramp.ffmpeg:ffmpeg:0.6.2
    org.apache.maven.plugins:maven-compiler-plugin:3.5.1
    org.apache.maven.plugins:maven-jar-plugin:null
    org.apache.maven.plugins:maven-war-plugin:3.2.1
    org.apache.tomcat.maven:tomcat7-maven-plugin:2.2
    org.aspectj:aspectjrt:1.7.4
    org.codehaus.mojo:exec-maven-plugin:1.2.1
    org.glassfish:javax.faces:2.2.18
    org.hibernate:hibernate-core:5.2.12.Final
    org.hibernate:hibernate-entitymanager:5.2.12.Final
    org.jetbrains.kotlin:kotlin-maven-plugin:1.3.11
    org.jetbrains.kotlin:kotlin-stdlib:1.3.11
    org.slf4j:slf4j-api:1.7.5
    org.springframework.boot:spring-boot:2.1.3.RELEASE
    org.springframework:spring-core:5.0.2.RELEASE
    org.springframework:spring-orm:5.0.2.RELEASE
    org.springframework:spring-tx:5.0.2.RELEASE
    org.springframework:spring-webmvc:5.0.2.RELEASE
    searchable-video-library:searchable-video-library:0.0.1-SNAPSHOT
    xuggle:xuggle-xuggler:5.4

## d. Application metrics and monitoring

There is a `Jenkinsfile` at the root of the repo that will build, deploy, and
test this repository's code. It is fully functional on Windows Jenkins hosts.

Currently, application metrics remain in the form of errors and logs. That is to
say, there is no centralized place to monitor the performance and stability of
the application.

## e. Destroy script

With ruby installed, run `ruby destroy-everything.rb -f`.

Without the `-f` flag, it will prompt you to confirm in case it was run
accidentally.

# 3. Use of Data Store/Storage:

We are using MySQL 5.7 to store user information, names, emails, etc, and have
the MySQL server on a completely separate box.

We are planning on using iSCSI along with file paths to handle storing videos.
We have a separate VM whose only purpose is to act as an iSCSI target (server)
for the webserver to put large MP4/MP3 files.

A table will be created to store information about the videos (ID, Title, date
of creation...) as well as a field that will contact the path to access the
video.

We currently have the ORM engine working and can store a "Person" object without
writing any SQL code.

# 4. Data encryption at rest:

Data is currently stored in plaintext in the MySQL database.

Data encryption at rest is planned.

Truecrypt for full disk encryption is also a good option to add to our security.

# 5. Database makes use of master/slave replication:

There is currently a single schema, there is no caching layer, and we use a
single MySQL database.

As the database is separated, it makes making master/slave boxes easier.

# 6. Use of Responsive design:

We do not need a framework to allow for responsive design.

Plain CSS with some discipline can achieve a clean, repeating, and responsive
interface.

We are using plain CSS to build responsive screens for clients. We are using
mobile-first designs and use relative units and relative positioning to allow
our interface to adapt to all screen sizes.

![Website at 1920x1080.](img/website.PNG)

![Website at a smaller resolution.](img/website-small.PNG)

# 7. Use of HTTP over SSL:

## a. Self-signed certificates

We currently have no certificates or self-signing mechanism.

## b. Login authentication mechanism

### i. How it works

We are using Java Server Faces (JSF) alongside a Server Filter and a Session
Managed Bean to authenticate users and ensure that only authenticated users may
access certain pages.

Our login authentication mechanism is currently working and authenticates to our
database to provide access. This was done through Hibernate Query Language
(HQL).

### ii. How it's secured

The username is stored in a Java Servlet Session that the user can identify via
a cookie.

There is built-in CSRF protection in the form of a nonce that gets inserted with
all forms.

## c. Security assumptions

### i. Firewall

We have port 8080 open for HTTP, and only port 8080.

### ii. Authentication keys

Authentication keys are to be stored in `~/.ssh/id_rsa` on the host.

These are RSA private keys.

They are copied to the VM's disk, used to clone the git repository, and then
immediately deleted from the VM.

### iii. Seeding of usernames and passwords

We seed the database with 15 test users.

    TODO give code snippets

### iv. Pre-seeding databases with schema and records

Our only SQL script that gets executed, aside from inserting test data, is one
that creates a schema called `searchable-video-library`.

All tables are created from POJOs (Plain Old Java Objects) annotated with
Hibernate annotations and are created at runtime of the Apache servlet.

    TODO show annotations alongside table from intellij idea

# 8. Use of user authentication:
There is a session in the form of cookies, but no logic to differentiate users as sessions yet, but is currently being configured by pairing UserID with SessionID.
Hibernate query is used to validate username and password from MySQL Database to allow user authentication.
The UI could easily be modified for authentication / un authentication users via CSS selectors.

# 9. Creation of Dev Environment (local laptop):
The development environment is well-documented, but is not automatically creatable.
The instructions are in the form of a markdown file.
All of our packer build scripts work.
`vagrant up` works.
The development environment uses GitHub deploy keys, and everyone deploys using their own keys.

# 10. Layout design:
This is our website layout.
At top has all the navigations, which direct you to different pages.
![layout](img/websitlayoutPNG.PNG "website_layout")

## 11. Management of Visio (or comparable) diagram tool of work flow:
This is the front-end website workflow.
![front_end_website_workflow](img/front_end_website_workflow.png "front_end_website_workflow")

This is the user experience flow.
![user_experience_workflow](img/user_experience_workflow.png "front_end_website_workflow")

This is the website server UML diagram.
![web_server_UML](img/web_server_UML.png "web_server_UML")

This is the Deploy keys
![deploy_key](img/deploy_key.PNG "deploy_key")



# 12. Management of project progress:
a. [Trello](https://trello.com/b/03OdRjtq/2019-team-07f)

b. [Slack](https://itmt-430-group.slack.com)

c. [GitHub](https://github.com/illinoistech-itm/2019-team-07f)

d. GitHub Issues to resolve bug posts from UI/UX tester
![github_bug](img/github_bug.png "github_bug")

# Trello Board:
![test_user](img/Trello_Board.png "Trello_Board")

# Slack:
![slack](img/slack.PNG "slack")

# 13. Team must generate at least 15 real “test” user data that is inserted upon instance creation and proper data to test functionality of a system:
We currently have 15 test users.
There are connection self-tests that the web box will perform with both the database box and storage box.
These are performed each time
![test_user](img/test_user.PNG "test_user")
